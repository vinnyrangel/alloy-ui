AUI.add("aui-datepicker-base",function(m){var d=m.Lang,g=d.isArray,f=d.isBoolean,a=d.isFunction,h=d.isString,q=m.Array,p=m.DataType,l="calendar",i="contentBox",s="currentNode",b="dateFormat",j="date-picker",r="formatter",c="locale",o="selectionMode",e="setValue";var n=m.Component.create({NAME:j,ATTRS:{calendar:{setter:"_setCalendar",value:{}},formatter:{value:function(v){var t=this,u=[];if(g(v)){q.each(v,function(x,w){u[w]=t.calendar.formatDate(x);});return u.join(",");}else{return t.calendar.formatDate(v);}},validator:a},setValue:{value:true,validator:f},stack:{lazyAdd:false,value:true,setter:"_setStack",validator:f},showOn:{value:"mousedown"},hideOn:{value:"mousedown"}},EXTENDS:m.OverlayContext,prototype:{initializer:function(){var u=this,t=u.get(l),v=new m.Calendar(t);u.calendar=v;u.after("calendar:selectionChange",u._afterSelectionChange);if(t.hasOwnProperty("selectedDates")){v.set("selectedDates",t.selectedDates);}},bindUI:function(){var t=this;n.superclass.bindUI.apply(this,arguments);t.on("show",t._onShowOverlay);},destructor:function(){var t=this;t.calendar.destroy();},_afterSelectionChange:function(u){var t=this;t._uiSetSelectedDates(u.newSelection);},_onShowOverlay:function(u){var t=this;t._renderCalendar();},_renderCalendar:function(){var t=this;t.calendar.render(t.get(i));},_setCalendar:function(u){var t=this;m.mix(u,{bubbleTargets:t});return u;},_setStack:function(u){var t=this;if(u){m.DatepickerManager.register(t);}else{m.DatepickerManager.remove(t);}return u;},_setTriggerValue:function(u){var t=this;var v=t.get(r).apply(t,[u]);t.get(s).val(v);},_uiSetSelectedDates:function(u){var t=this;if(t.calendar.get(o)!=="multiple"){t.hide();}if(t.get(e)){t._setTriggerValue(u);}if(u.length){t.calendar.set("date",u[u.length-1]);}}}});m.DatePicker=n;m.DatepickerManager=new m.OverlayManager({zIndexBase:1000});var k=function(){};k.ATTRS={dateFormat:{value:"%m/%d/%Y",validator:h},selectedDates:{readOnly:false,setter:function(u){var t=this;t._clearSelection();t.selectDates(u);}}};k.prototype={formatDate:function(w){var v=this,u=v.get(b),t=v.get(c);return p.Date.format(w,{format:u,locale:t});}};m.Base.mix(m.Calendar,[k]);},"@VERSION@",{skinnable:true,requires:["aui-datatype","calendar","aui-overlay-context"]});